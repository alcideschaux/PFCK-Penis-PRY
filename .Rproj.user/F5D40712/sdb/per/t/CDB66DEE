{
    "collab_server" : "",
    "contents" : "library(readr)\nlibrary(dplyr)\nlibrary(forcats)\nlibrary(stringr)\n\nMarkers <- read_csv(\"../Data/PFCK_DB.csv\")\n\nPath <- read_csv(\"../Data/PNS_PRY.csv\") %>% \n  rename(\"sp\" = \"caseid\") %>%\n  filter(sp != \"control\") %>%\n  filter(subtype != \"giant condyloma\") %>% \n  select(x, y, sp, tma, subtype, grade)\n\nDB <- inner_join(Path, Markers) %>% \n  mutate(\n    grade = fct_recode(\n      factor(grade, ordered = TRUE),\n      \"Grade 1\" =  \"1\",\n      \"Grade 2\" =  \"2\",\n      \"Grade 3\" =  \"3\"\n    ),\n    subtype = factor(\n      str_to_title(subtype)\n    ),\n    pdl1_tumor_location = fct_recode(\n      factor(pdl1_tumor_location, levels = c(1, 2, 3), ordered = TRUE),\n      \"Cytplasmic\" = \"1\",\n      \"Membranous\" = \"2\",\n      \"Cytoplasmic/Membraneous\" = \"3\"\n    ),\n    host_response = fct_recode(\n      factor(host_response, levels = c(0:3), ordered = TRUE),\n      \"No inflammatory cells\" = \"0\",\n      \"Rare inflammatory cells\" = \"1\",\n      \"Lymphoid aggregates\" = \"2\",\n      \"Intense inflammation\" = \"3\"\n    ),\n    foxp3_lymph_intensity = fct_recode(\n      factor(foxp3_lymph_intensity, levels = c(0:3), ordered = TRUE),\n      \"No staining\" = \"0\",\n      \"Weak staining\" = \"1\",\n      \"Moderate staining\" = \"2\",\n      \"Strong staining\" = \"3\"\n    ),\n    foxp3_tumor_intensity = fct_recode(\n      factor(foxp3_tumor_intensity, levels = c(0:3), ordered = TRUE),\n      \"No staining\" = \"0\",\n      \"Weak staining\" = \"1\",\n      \"Moderate staining\" = \"2\",\n      \"Strong staining\" = \"3\"\n    ),\n    cd8foxp3_tumor = factor(\n      ifelse(\n        cd8_tumor > foxp3_lymph_tumor,\n        \"CD8 > FOXP3\",\n        \"CD8 <= FOXP3\"\n      )\n    ),\n    cd8foxp3_stroma = factor(\n      ifelse(\n        cd8_stroma > foxp3_lymph_stroma,\n        \"CD8 > FOXP3\",\n        \"CD8 <= FOXP3\"\n      )\n    ),\n    high_grade = factor(\n      ifelse(\n        grade == \"Grade 3\",\n        \"Yes\",\n        \"No\"\n      )\n    )\n  )\n\nsave(DB, file = \"../Data/DF.Rdata\")\n",
    "created" : 1506442340431.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1550218530",
    "id" : "CDB66DEE",
    "lastKnownWriteTime" : 1506511392,
    "last_content_update" : 1506511392969,
    "path" : "~/Dropbox/Research/Projects_Analysis/UAB/PDL1_Penis/Data/Tidy.R",
    "project_path" : null,
    "properties" : {
    },
    "relative_order" : 3,
    "source_on_save" : true,
    "source_window" : "",
    "type" : "r_source"
}